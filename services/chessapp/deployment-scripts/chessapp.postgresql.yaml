---
name: chessapp
components:
   - chess-postgres:
        image: postgres:17.4-bookworm
        expose: 5432
        stateful: true
        environments:
          - POSTGRES_PASSWORD: testing123
          - POSTGRES_DB: test_db
   - app:
        image: chessapp:1
        port: 8000
        entry: true
        environments:
          - DEBUG: False
          - DJANGO_SECRET_KEY: some-secret-key 
          - DB_ENGINE: django.db.backends.postgresql
          - DB_USER: postgres
          - DB_PASSWORD: testing123
          - DB_NAME: test_db
          - DB_HOST: chess-postgres
          - DB_PORT: 5432

state: chess-postgres:/var/lib/postgresql/data/
deterministic: true
consistency: linearizability
